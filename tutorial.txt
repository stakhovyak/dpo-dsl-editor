input = (A, B);
root = (x, y);
transit_to = (x,y)(x, m1)(m1, m2)(m2, y)(m1, u)(m2, v)(u)(v);

@rule = root -> root -> transit_to;

$test = input <~ @rule 5;